var rpcProxy=null,state=null,fmkey="fmkey",lastProcessedKeyDownTime=0,useFMShortcutHandling=false,canHandleTabKeyDown=true,isFindMode=false,isMobile=/Android|webOS|iPhone|iPad|iPod|IEMobile|Opera Mini/i.test(navigator.userAgent),orientationChanged=false;window.com_filemaker_jwpc_iwp_application_AppJavaScriptComponent=function(){rpcProxy=this.getRpcProxy();state=this.getState();rpcProxy.setRetinaDisplay(1<window.devicePixelRatio);var a=sessionStorage.getItem(fmkey);if(a!=null&&a!=-1){rpcProxy.closePreviousSession(a)}this.onStateChange=function(){var b=this.getState();useFMShortcutHandling=b.useFMShortcutHandling;isFindMode=b.isFindMode};this.registerRpc({getBrowserPosition:function(){rpcProxy.setBrowserPosition(window.screenX,window.screenY)},setClientId:function(b){var c=sessionStorage.getItem(fmkey);if(c!=b&&c!=null&&c!=-1){rpcProxy.closePreviousSession(c)}if(b!=-1){sessionStorage.setItem(fmkey,b)}else{sessionStorage.removeItem(fmkey)}if(isMobile){rpcProxy.onOrientationChange(window.innerWidth,window.innerHeight)}},tryRemoveActiveField:function(){if(isTextArea()){document.activeElement.blur()}},tryEnableTabKeyHandling:function(){if(!canHandleTabKeyDown){canHandleTabKeyDown=true}},deselectText:function(){window.getSelection().removeAllRanges()}})};window.onbeforeunload=function(){rpcProxy.performBrowserClose()};function killBackSpace(c){c=c?c:window.event;var b=c.target?c.target:c.srcElement?c.srcElement:null;if(b&&b.tagName&&(b.type&&/(input)|(textarea)|(password)|(text)|(file)/.test(b.type.toLowerCase()))||b.tagName.toLowerCase()=="textarea"||b.tagName.toLowerCase()=="div"){return true}var a=c.keyCode?c.keyCode:c.which?c.which:null;if(a==8){if(c.preventDefault){c.preventDefault()}return false}return true}if(typeof document.addEventListener!="undefined"){document.addEventListener("keydown",killBackSpace,false)}else{if(typeof document.attachEvent!="undefined"){document.attachEvent("onkeydown",killBackSpace)}else{var oldOnkeydown=document.onkeydown;if(oldOnkeydown!=null){document.onkeydown=function(a){oldOnkeydown(a);killBackSpace(a)}}else{document.onkeydown=killBackSpace}}}function preventDragAndDrop(a){a=a?a:window.event;a.cancelBubble=true;a.returnValue=false;if(a.preventDefault){a.preventDefault()}return false}window.addEventListener("drop",preventDragAndDrop,false);window.addEventListener("dragover",preventDragAndDrop,false);window.addEventListener("dragenter",preventDragAndDrop,false);if(isMobile){window.addEventListener("orientationchange",function(){if(/Chrome/i.test(navigator.userAgent)){orientationChanged=true}else{if(rpcProxy!=null){rpcProxy.onOrientationChange(window.innerWidth,window.innerHeight)}}},false);window.addEventListener("resize",function(){if(rpcProxy!=null&&orientationChanged){rpcProxy.onOrientationChange(window.innerWidth,window.innerHeight);orientationChanged=false}},false)}window.onkeydown=function(){if(useFMShortcutHandling&&window.event!=null){var c=window.event,a=c.modifiers?(c.modifiers&Event.SHIFT_MASK):c.shiftKey,d=c.which?c.which:c.keyCode,b=(d==9||d==13?(new Date()).getTime():null);switch(d){case 9:handleTabKeyDown(b,a);break;case 13:handleEnterKeyDown(b);break;default:break}}};function handleTabKeyDown(b,a){event.cancelBubble=true;event.returnValue=false;if(isValidKeyDown(b)&&canHandleTabKeyDown){canHandleTabKeyDown=false;rpcProxy.tabPressed(!a)}}function handleEnterKeyDown(a){if(isFindMode&&isValidKeyDown(a)&&!isTextArea()){event.cancelBubble=true;event.returnValue=false;rpcProxy.enterPressed()}}function isValidKeyDown(a){if(a-lastProcessedKeyDownTime>=200){lastProcessedKeyDownTime=a;return true}else{return false}}function isTextArea(){var a=document.activeElement;return(a!=null&&(a.nodeName.toLowerCase()=="textarea"||a.nodeName.toLowerCase()=="input"||a.className.toLowerCase()=="text"||a.isContentEditable))};